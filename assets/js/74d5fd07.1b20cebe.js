"use strict";(self.webpackChunkflutter_news_toolkit_docs=self.webpackChunkflutter_news_toolkit_docs||[]).push([[935],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},p=Object.keys(e);for(n=0;n<p.length;n++)a=p[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(n=0;n<p.length;n++)a=p[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,p=e.originalType,s=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),m=c(a),h=r,d=m["".concat(s,".").concat(h)]||m[h]||u[h]||p;return a?n.createElement(d,i(i({ref:t},l),{},{components:a})):n.createElement(d,i({ref:t},l))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=a.length,i=new Array(p);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<p;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},6168:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>p,metadata:()=>o,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const p={sidebar_position:9,description:"Learn how to configure in-app purchases in your Flutter news application."},i="In-app purchases",o={unversionedId:"flutter_development/in_app_purchases",id:"flutter_development/in_app_purchases",title:"In-app purchases",description:"Learn how to configure in-app purchases in your Flutter news application.",source:"@site/docs/flutter_development/in_app_purchases.md",sourceDirName:"flutter_development",slug:"/flutter_development/in_app_purchases",permalink:"/news_toolkit/flutter_development/in_app_purchases",draft:!1,editUrl:"https://github.com/flutter/news_toolkit/tree/main/docs/docs/flutter_development/in_app_purchases.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9,description:"Learn how to configure in-app purchases in your Flutter news application."},sidebar:"tutorialSidebar",previous:{title:"Ads",permalink:"/news_toolkit/flutter_development/ads"},next:{title:"Cache your application state",permalink:"/news_toolkit/flutter_development/cache_application_state"}},s={},c=[],l={toc:c};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"in-app-purchases"},"In-app purchases"),(0,r.kt)("p",null,"This project supports in-app purchasing for Flutter using the ",(0,r.kt)("a",{parentName:"p",href:"https://pub.dev/packages/in_app_purchase"},"in_app_purchase")," package. The generated template application provides a mocked version of the",(0,r.kt)("inlineCode",{parentName:"p"},"in_app_purchase")," package called ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flutter/news_toolkit/tree/main/flutter_news_example/packages/purchase_client"},(0,r.kt)("inlineCode",{parentName:"a"},"purchase_client")),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flutter/news_toolkit/blob/main/flutter_news_example/packages/purchase_client/lib/src/purchase_client.dart#L36"},(0,r.kt)("inlineCode",{parentName:"a"},"PurchaseClient")," class")," implements ",(0,r.kt)("inlineCode",{parentName:"p"},"InAppPurchase")," from the ",(0,r.kt)("a",{parentName:"p",href:"https://pub.dev/packages/in_app_purchase"},"in_app_purchase")," package and uses the same mechanism to expose the ",(0,r.kt)("inlineCode",{parentName:"p"},"purchaseStream"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"@override\nStream<List<PurchaseDetails>> get purchaseStream => _purchaseStream.stream;\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flutter/news_toolkit/blob/main/flutter_news_example/packages/purchase_client/lib/src/products.dart"},"products.dart")," file contains mocked products."),(0,r.kt)("p",null,"The Dart Frog backend serves a list of available subscription data featuring copy text and price information. To edit the subscription data, change the ",(0,r.kt)("inlineCode",{parentName:"p"},"getSubscriptions()")," method in your custom news data source. Make sure that the product IDs are the same for both your iOS and Android purchase project, as this information is passed to the platform-agnostic ",(0,r.kt)("inlineCode",{parentName:"p"},"in_app_purchase")," package."),(0,r.kt)("p",null,"To use the ",(0,r.kt)("a",{parentName:"p",href:"https://pub.dev/packages/in_app_purchase"},"in_app_purchase")," package, substitute ",(0,r.kt)("inlineCode",{parentName:"p"},"PurchaseClient")," in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flutter/news_toolkit/blob/main/flutter_news_example/lib/main/main_development.dart#L87"},(0,r.kt)("inlineCode",{parentName:"a"},"main_development.dart"))," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/flutter/news_toolkit/blob/main/flutter_news_example/lib/main/main_production.dart#L87"},(0,r.kt)("inlineCode",{parentName:"a"},"main_production.dart"))," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"in_app_purchase")," package implementation."),(0,r.kt)("p",null,"Then, follow the ",(0,r.kt)("a",{parentName:"p",href:"https://pub.dev/packages/in_app_purchase#getting-started"},"Getting started")," section in the ",(0,r.kt)("inlineCode",{parentName:"p"},"in_app_purchase")," package docs."))}u.isMDXComponent=!0}}]);